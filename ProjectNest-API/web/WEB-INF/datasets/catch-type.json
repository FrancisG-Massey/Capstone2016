{
    "before": "
        SELECT * FROM extend_session(#string:session-token#::text, #string:session-timeout#::interval) es WHERE es IS NOT NULL;
    ",
    "GET" : "
        WITH logged_user AS (
            SELECT
                user_id,
                user_isadmin
            FROM users u
            JOIN session s ON u.user_id = s.session_userid
            WHERE (#string:session-token# IS NOT NULL) AND (s.session_token = #string:session-token#)
            LIMIT 1
        )

        SELECT 
            ct.catchtype_id as id,
            ct.catchtype_name as name,
            ct.catchtype_imagefilename as img_filename,
            ct.catchtype_isinactive as inactive
        FROM
            logged_user lu,
            catchtype ct
        WHERE
            ((#bigint:id# IS NULL) OR (ct.catchtype_id = #bigint:id#)) AND
            ((#string:name# IS NULL) OR (lower(ct.catchtype_name) LIKE lower('%' || #string:name# || '%'))) AND
            
            (((#boolean:inactive# IS NOT NULL) AND (ct.catchtype_isinactive = #boolean:inactive#)) OR
            ((#boolean:inactive# IS NULL) AND (ct.catchtype_isinactive = false)))

        GROUP BY
            ct.catchtype_id
        ORDER BY
            ct.catchtype_id;
    ",
    "POST" : "
        INSERT INTO catchtype (
            catchtype_name,
            catchtype_imagefilename
        )
        SELECT
            #string:name#,
            #string:img_filename#
        WHERE
            (#bigint:id# IS NULL) AND 
            (#string:name# IS NOT NULL)
        RETURNING
            catchtype_id;
    ",
    "PUT" : "
        UPDATE catchtype
        SET
            catchtype_name = #string:name#,
            catchtype_imagefilename = #string:img_filename#
        WHERE 
            catchtype_id = #bigint:id#
        RETURNING
            catchtype_id;
    ",
    "DELETE" : ""
}