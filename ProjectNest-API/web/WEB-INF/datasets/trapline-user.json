{
    "before": "
        SELECT
            es.user_id,
            es.user_isadmin,
            es.session_expirestimestamp
        FROM 
            extend_session(
                #string:session-token#::text, 
                #string:session-timeout#::interval
            ) es 
        WHERE es IS NOT NULL;
    ",
    "GET" : "
        SELECT 
            tlu.traplineuser_id as id,
            tlu.traplineuser_userid as user_id,
            tlu.traplineuser_traplineid as trapline_id,
            tlu.traplineuser_isadmin as admin
        FROM
            traplineuser tlu
        WHERE
            ((#boolean:logged-user-isadmin# = true) OR (tlu.traplineuser_userid = #bigint:logged-user-id#)) AND
            ((#bigint:id# IS NULL) OR (tlu.traplineuser_id = #bigint:id#)) AND
            ((#bigint:user-id# IS NULL) OR (tlu.traplineuser_userid = #bigint:user-id#)) AND
            ((#bigint:trapline-id# IS NULL) OR (tlu.traplineuser_traplineid = #bigint:trapline-id#)) AND
            ((#boolean:admin# IS NULL) OR (tlu.traplineuser_isadmin = #boolean:admin#))
        GROUP BY
            tlu.traplineuser_id
        ORDER BY
            tlu.traplineuser_id;
    ",
    "POST" : "
        INSERT INTO traplineuser (
            traplineuser_userid,
            traplineuser_traplineid,
            traplineuser_isadmin
        )
        SELECT
            #bigint:user_id#,
            #bigint:trapline_id#,
            #boolean:admin#
        WHERE
            (#bigint:id# IS NULL) AND 
            (#bigint:user_id# IS NOT NULL) AND (#bigint:trapline_id# IS NOT NULL)
        RETURNING
            traplineuser_id;
    ",
    "PUT" : "
        UPDATE traplineuser
        SET
            traplineuser_userid = #bigint:user_id#,
            traplineuser_traplineid = #bigint:trapline_id#,
            traplineuser_isadmin = #boolean:admin#
        WHERE 
            traplineuser_id = #bigint:id#
        RETURNING
            traplineuser_id;
    ",
    "DELETE" : "
        DELETE FROM traplineuser
        WHERE 
            traplineuser_id = #bigint:id#
        RETURNING traplineuser_id;
    "
}